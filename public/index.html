<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Converse com Jesus</title>

  <!-- CSS externo -->
  <link rel="stylesheet" href="styles.css?v=1.4" />

  <!-- Manifest para instala√ß√£o como app -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1e1e1e">

  <!-- √çcones -->
  <link rel="icon" href="icons/icon-192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
</head>
<body>
  <header>
    <button class="menu-btn" aria-label="Abrir menu" onclick="toggleMenu()" aria-expanded="false" aria-controls="sideMenu">‚ò∞</button>
    <div class="header-title">
      <h1>Converse com Jesus</h1>
      <a id="shareBtn" target="_blank" class="share-link">Compartilhe ‚ù§Ô∏è</a>
    </div>
  </header>

  <!-- Menu lateral -->
  <nav id="sideMenu" class="side-menu" aria-hidden="true" aria-label="Configura√ß√µes">
    <div class="menu-header">
      <h3>Configura√ß√µes</h3>
      <button id="closeMenuBtn" aria-label="Fechar menu">
        <img src="/icons/arrow-menu.svg" alt="Fechar" width="24" height="24"/>
      </button>
    </div>

    <label>
      <input type="checkbox" id="voiceToggle" checked />
      Ativar voz
    </label>
    <label>
      <input type="radio" name="voiceType" value="male" />
      Voz masculina
    </label>
    <label>
      <input type="radio" name="voiceType" value="female" checked />
      Voz feminina
    </label>

    <hr class="menu-separator">

    <!-- Link para pedir salmo/ora√ß√£o -->
    <div class="menu-section">
      <a href="#" id="salmoLink" class="salmo-link">
        Busque o seu salmo ou ora√ß√£o
        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/Logo_of_YouTube_%282015-2017%29.svg"
             alt="YouTube" class="yt-icon" />
      </a>
    </div>
  </nav>

  <!-- Overlay escuro -->
  <div id="overlay"></div>

  <main class="container">
    <div class="chat-box" id="chat-box" role="log" aria-live="polite" aria-relevant="additions"></div>

    <form id="chat-form">
      <input
        type="text"
        id="message-input"
        placeholder="Digite sua mensagem..."
        required
        autocomplete="off"
        aria-label="Mensagem para Jesus"
      />
      <div class="button-group">
        <button class="chat-btn" type="submit">Enviar</button>
        <button class="chat-btn" type="button" id="voice-btn" aria-label="Falar com Jesus">
          Fale
        </button>
      </div>
    </form>

    <div class="loading" id="loading" style="display: none;">
      <div class="spinner" aria-hidden="true"></div>
      <span><strong>Jesus</strong> quer falar com voc√™...</span>
    </div>
  </main>

  <!-- Fundo escurecido -->
  <div id="installOverlay" class="install-overlay" style="display:none;"></div>

  <!-- Pop-up de instala√ß√£o -->
  <div id="installPopup" class="install-popup" style="display:none;">
    <h3>Instalar este App?</h3>
    <p>Adicione √† tela inicial para acesso r√°pido.</p>
    <div class="buttons">
      <button id="btnInstall">Instalar</button>
      <button id="btnDismiss">Agora n√£o</button>
    </div>
  </div>

  <!-- Pop-up Salmo/Ora√ß√£o -->
  <div id="salmoOverlay" class="salmo-overlay"></div>
  <div id="salmoPopup" class="salmo-popup">
    <h3>Buscar no YouTube</h3>
    <input type="text" id="salmoInput" placeholder="Digite o salmo ou ora√ß√£o" />
    <div class="salmo-buttons">
      <button id="salmoBuscar">Buscar ‚ñ∂</button>
      <button id="salmoFechar">Cancelar</button>
    </div>
  </div>

  <!-- ======= FORMUL√ÅRIO DE SUGEST√ÉO / RECLAMA√á√ÉO ======= -->
  <footer style="background:#f7f7f7;padding:20px;margin-top:20px;">
    <h3>Envie uma sugest√£o ou reclama√ß√£o</h3>

    <form id="feedbackForm"
          action="https://formspree.io/f/xdkwapdz"  <!-- üîó TROQUE AQUI -->
          method="POST">

      <label for="nome">Nome (opcional)</label><br>
      <input type="text" name="nome" id="nome" placeholder="Seu nome"
             style="width:100%;padding:8px;margin-bottom:10px;">

      <label for="email">Email (opcional)</label><br>
      <input type="email" name="email" id="email" placeholder="seuemail@gmail.com"
             style="width:100%;padding:8px;margin-bottom:10px;">

      <label for="mensagem">Mensagem*</label><br>
      <textarea name="mensagem" id="mensagem" rows="4"
                placeholder="Digite aqui sua sugest√£o ou reclama√ß√£o"
                style="width:100%;padding:8px;margin-bottom:10px;" required></textarea>

      <input type="hidden" name="_subject" value="Nova mensagem do site Converse com Jesus">

      <button type="submit"
              style="padding:10px 20px;background:#4CAF50;color:#fff;border:none;border-radius:4px;cursor:pointer;">
        Enviar
      </button>
    </form>

    <p id="statusMsg" style="margin-top:10px;"></p>
  </footer>

  <script src="script.js?v=1.7"></script>

  <script>
    // Feedback de envio sem recarregar
    const form = document.getElementById('feedbackForm');
    const statusMsg = document.getElementById('statusMsg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = new FormData(form);
      const resp = await fetch(form.action, {
        method: form.method,
        body: data,
        headers: { 'Accept': 'application/json' }
      });
      if (resp.ok) {
        statusMsg.textContent = "‚úÖ Obrigado! Sua mensagem foi enviada.";
        form.reset();
      } else {
        statusMsg.textContent = "‚ùå Ocorreu um erro. Tente novamente.";
      }
    });
  </script>
</body>
        </html>
